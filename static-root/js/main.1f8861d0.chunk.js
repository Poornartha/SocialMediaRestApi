(this.webpackJsonpsocial_media_ui=this.webpackJsonpsocial_media_ui||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(5),s=n.n(c),r=(n(13),n(7)),l=n(1);function i(e,t,n,a){var o;a&&(o=JSON.stringify(a));var c=new XMLHttpRequest,s="http://localhost:8000/posts/api/"+t;console.log(s),c.responseType="json",c.open(e,s);var r=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var o=n[a].trim();if(o.substring(0,e.length+1)===e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}return t}("csrftoken");c.setRequestHeader("Content-Type","application/json"),r&&c.setRequestHeader("X-CSRFToken",r),c.onload=function(){console.log(c.response),console.log(c.status),n(c.response,c.status)},c.onerror=function(){n({message:"Something is not right. Please Try Again Later."},400)},console.log(o),c.send(o)}function u(e,t){var n="";t&&(n="user/".concat(t)),i("GET",n,e)}function m(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";i("POST","action",n,""!==a?{id:e,action:t,content:a}:{id:e,action:t})}var d=n(2);function p(e){var t,n=Object(a.useState)([]),c=Object(l.a)(n,2),s=c[0],r=c[1],i=Object(a.useState)([]),m=Object(l.a)(i,2),p=m[0],f=m[1],E=Object(a.useState)(!1),v=Object(l.a)(E,2),g=v[0],h=v[1];e.username&&(t=e.username);var y=function(e,t){console.log(t),200===t?(console.log(e),r(e),f(e)):400===t&&alert(e.message)};Object(a.useEffect)((function(){if(e.newPosts){var t=Object(d.a)(e.newPosts).concat(s);t.length!==p.length&&f(t)}}),[e.newPosts,p,s]),Object(a.useEffect)((function(){!1===g&&(t?u(y,t):u(y),h(!0))}),[t]);var O=function(e){if(e){var t=Object(d.a)(s);t.unshift(e),r(t);var n=Object(d.a)(p);n.unshift(p),f(n)}else u(y)};return o.a.createElement("div",{className:"col-md-10 mx-auto col-12 text-center"},p.map((function(e,t){return o.a.createElement(b,{didRepost:O,post:e,key:t})})))}function f(e){var t=e.post,n=e.action,a=e.didPerformAction,c=t.likes?t.likes:0,s=n.display?n.display:"Action",r="like"===n.type?"btn btn-outline-success mt-3 btn-sm":"unlike"===n.type?"btn btn-outline-secondary mt-3 btn-sm":"btn btn-outline-info mt-3 btn-sm",l=function(e,t){console.log(t,e),200!==t&&201!==t||!a||a(e,t)},i="like"===n.type?"".concat(c," ").concat(s):"".concat(s);return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:r,onClick:function(e){e.preventDefault(),"repost"===n.type?(m(t.id,n.type,l,"Repost"),window.location.reload(!0)):m(t.id,n.type,l)}},i))}function b(e){var t=e.didRepost,n=e.isRepost,c=(e.refreshPosts,Object(a.useState)(e.post?e.post:null)),s=Object(l.a)(c,2),i=s[0],u=s[1],m=Object(a.useState)(e.post?e.post:null),d=Object(l.a)(m,2),p=d[0],E=d[1],v=window.location.pathname,g=Object(r.a)(/([0-9]+)/,{postid:1}),h=v.match(g),y=h?h.groups.postid:-1,O="".concat(y)==="".concat(i.id),j=function(e,n){200===n?E(e):201===n&&(E(e),t(e))},k=function(e){e.preventDefault(),window.location.href="/posts/detail/".concat(i.id)};Object(a.useEffect)((function(){u(p)}),[i,p]);var w="border p-5 m-5  post";return w=void 0==n?"border p-3 m-2 mt-5 post":"border p-3 m-2 mt-3 mb-3 post",o.a.createElement("div",{className:w},o.a.createElement("h5",null," ",o.a.createElement("span",{id:i.id}," ",i.text," ")," "),o.a.createElement("h5",null,o.a.createElement("span",null,i.parent&&o.a.createElement(b,{post:i.parent,isRepost:!1}))),void 0==n?o.a.createElement("div",{className:"btn btn-group"},o.a.createElement(f,{post:i,didPerformAction:j,action:{type:"like",display:"Likes"}}),o.a.createElement(f,{post:i,didPerformAction:j,action:{type:"unlike",display:"Unlike"}}),o.a.createElement(f,{post:i,didPerformAction:j,action:{type:"repost",display:"Repost"}}),!0===O?null:o.a.createElement("button",{className:"btn btn-outline-dark mt-3 btn-sm",onClick:k},"View Post")):o.a.createElement("div",{className:"btn btn-group"},!0===O?null:o.a.createElement("button",{className:"btn btn-outline-dark mt-3 btn-sm",onClick:k},"View Post")))}function E(e){var t=e.username,n=e.personal,c=e.canPost,s=Object(a.useState)([]),r=Object(l.a)(s,2),u=r[0],m=r[1],f=function(e){e.preventDefault();var t,n,a=b.current.value,o=Object(d.a)(u);t=a,n=function(e,t){201===t?(console.log(e),o.unshift(e),m(o)):alert("Something's not right. Please try again.")},console.log(t),i("POST","create",n,{text:t}),b.current.value=""},b=o.a.createRef();return 1==n?o.a.createElement("div",{className:"col-md-10 mx-auto col-12 text-center"},o.a.createElement("h3",null,t),"true"==c&&o.a.createElement("div",{className:"mt-5 col-md-8 mx-auto col-10 text-center"},o.a.createElement("form",{onSubmit:f,className:"form-group mt-3"},o.a.createElement("textarea",{required:!0,ref:b,placeholder:"Your Post!",className:"form-control",name:"post",cols:"10",rows:"8"}),o.a.createElement("button",{type:"submit",className:"btn btn-success colorme my-3"},"Post"))),o.a.createElement(p,{newPosts:u,username:t})," :"):o.a.createElement("div",{className:"col-md-10 mx-auto col-12 text-center"},o.a.createElement("h3",null,t),"true"==c&&o.a.createElement("div",{className:"mt-5 col-md-8 mx-auto col-10 text-center"},o.a.createElement("form",{onSubmit:f,className:"form-group mt-3"},o.a.createElement("textarea",{required:!0,ref:b,placeholder:"Your Post!",className:"form-control",name:"post",cols:"10",rows:"8"}),o.a.createElement("button",{type:"submit",className:"btn btn-success colorme my-3"},"Post"))),o.a.createElement(p,{newPosts:u}))}function v(e){var t=e.postid;console.log("Post Id: ",t);var n=Object(a.useState)(!1),c=Object(l.a)(n,2),s=c[0],r=c[1],u=Object(a.useState)(null),m=Object(l.a)(u,2),d=m[0],p=m[1],f=function(e,t){console.log(e),200===t||201===t?p(e):alert("The requested Post acannot be fetched. Try again later.")};return Object(a.useEffect)((function(){!1===s&&(!function(e,t){i("GET","".concat(t),e)}(f,t),r(!0))}),[t,s,r]),null===d?null:o.a.createElement(b,{post:d})}n(14);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var g=o.a.createElement,h=document.getElementById("page-root");h.dataset.personal?s.a.render(o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",{class:"text-center"}," Profile "),o.a.createElement("hr",null),o.a.createElement("h1",{class:"text-center"}," ",h.dataset.username," "),o.a.createElement(p,{username:h.dataset.username})),h):s.a.render(g(E,h.dataset),h);var y=document.querySelectorAll(".rootdetail");console.log(y),y.forEach((function(e){s.a.render(g(v,e.dataset),e)})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,t,n){e.exports=n(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.1f8861d0.chunk.js.map